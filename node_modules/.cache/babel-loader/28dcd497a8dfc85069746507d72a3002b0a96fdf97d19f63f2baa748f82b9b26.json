{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import cookie from\"js-cookie\";import\"./Header.css\";import{validateAccessToken,getCurrentUser}from\"../app.js\";import{Link}from\"react-router-dom\";import config from\"../configs/config.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const[isLoggedIn,setIsLoggedIn]=useState(false);const[userData,setUserData]=useState(null);useEffect(()=>{async function checkAuthentication(){try{const accessToken=cookie.get(\"accessToken\");if(accessToken){const isAuthenticated=await validateAccessToken();setIsLoggedIn(isAuthenticated);if(isAuthenticated){const currentUser=await getCurrentUser();setUserData(currentUser);}}}catch(error){console.error(\"Error checking authentication:\",error);// Handle error, such as logging out the user\n}}checkAuthentication();},[]);return/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"div\",{id:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:\"../img/logo.png\",alt:\"logo\"})})}),/*#__PURE__*/_jsxs(\"div\",{id:\"search_bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\"}),/*#__PURE__*/_jsx(\"button\",{children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",x:\"0px\",y:\"0px\",viewBox:\"0 0 50 50\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z\"})})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"cart\"}),/*#__PURE__*/_jsx(\"div\",{id:\"favourites\",children:isLoggedIn?/*#__PURE__*/_jsx(Link,{to:\"/fav\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",width:\"24\",height:\"24\",fill:\"none\",stroke:\"var(--orange-color)\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"})})}):/*#__PURE__*/_jsx(Link,{to:\"/login\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 24 24\",width:\"24\",height:\"24\",fill:\"none\",stroke:\"var(--orange-color)\",strokeWidth:\"2\",strokeLinecap:\"round\",strokeLinejoin:\"round\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\"})})})}),/*#__PURE__*/_jsx(\"div\",{id:\"profile\",children:isLoggedIn&&userData?/*#__PURE__*/_jsx(Link,{to:\"/account\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://\".concat(config.host,\":3001/api/getImage?folder=\",\"profile-pictures\",\"&fileName=\").concat(userData.profile_image),alt:\"profile_picture\"})}):/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"sign in\"}),\" / \",/*#__PURE__*/_jsx(Link,{to:\"/reg\",children:\"sign up\"})]})})]});};export default Header;","map":{"version":3,"names":["React","useEffect","useState","cookie","validateAccessToken","getCurrentUser","Link","config","jsx","_jsx","jsxs","_jsxs","Header","isLoggedIn","setIsLoggedIn","userData","setUserData","checkAuthentication","accessToken","get","isAuthenticated","currentUser","error","console","children","to","id","src","alt","type","placeholder","xmlns","x","y","viewBox","d","width","height","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","concat","host","profile_image"],"sources":["C:/Users/Bodnarchuk Bohdan/Desktop/bazar_remake/frontend/src/components/Header.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport cookie from \"js-cookie\";\r\nimport \"./Header.css\";\r\nimport { validateAccessToken, getCurrentUser } from \"../app.js\";\r\nimport { Link } from \"react-router-dom\";\r\nimport config from \"../configs/config.js\";\r\n\r\nconst Header = () => {\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [userData, setUserData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function checkAuthentication() {\r\n      try {\r\n        const accessToken = cookie.get(\"accessToken\");\r\n        if (accessToken) {\r\n          const isAuthenticated = await validateAccessToken();\r\n          setIsLoggedIn(isAuthenticated);\r\n          if (isAuthenticated) {\r\n            const currentUser = await getCurrentUser(); \r\n            setUserData(currentUser); \r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error checking authentication:\", error);\r\n        // Handle error, such as logging out the user\r\n      }\r\n    }\r\n\r\n    checkAuthentication();\r\n  }, []);\r\n\r\n  return (\r\n    <header>\r\n      <Link to=\"/\">\r\n        <div id=\"logo\">\r\n          <img src=\"../img/logo.png\" alt=\"logo\" />\r\n        </div>\r\n      </Link>\r\n      <div id=\"search_bar\">\r\n        <input type=\"text\" placeholder=\"Search...\" />\r\n        <button>\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            x=\"0px\"\r\n            y=\"0px\"\r\n            viewBox=\"0 0 50 50\"\r\n          >\r\n            <path d=\"M 21 3 C 11.654545 3 4 10.654545 4 20 C 4 29.345455 11.654545 37 21 37 C 24.701287 37 28.127393 35.786719 30.927734 33.755859 L 44.085938 46.914062 L 46.914062 44.085938 L 33.875 31.046875 C 36.43682 28.068316 38 24.210207 38 20 C 38 10.654545 30.345455 3 21 3 z M 21 5 C 29.254545 5 36 11.745455 36 20 C 36 28.254545 29.254545 35 21 35 C 12.745455 35 6 28.254545 6 20 C 6 11.745455 12.745455 5 21 5 z\"></path>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      <div id=\"cart\"></div>\r\n      <div id=\"favourites\">\r\n        {isLoggedIn ? (\r\n          <Link to=\"/fav\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24\"\r\n              height=\"24\"\r\n              fill=\"none\"\r\n              stroke=\"var(--orange-color)\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            >\r\n              <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\" />\r\n            </svg>\r\n          </Link>\r\n        ) : (\r\n          <Link to=\"/login\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"24\"\r\n              height=\"24\"\r\n              fill=\"none\"\r\n              stroke=\"var(--orange-color)\"\r\n              strokeWidth=\"2\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n            >\r\n              <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z\" />\r\n            </svg>\r\n          </Link>\r\n        )}\r\n      </div>\r\n      <div id=\"profile\">\r\n        {isLoggedIn && userData ? (\r\n          <Link to=\"/account\">\r\n            <img\r\n              src={`http://${config.host}:3001/api/getImage?folder=${\"profile-pictures\"}&fileName=${userData.profile_image}`}\r\n              alt=\"profile_picture\"\r\n            />\r\n          </Link>\r\n        ) : (\r\n          <p>\r\n            <Link to=\"/login\">sign in</Link> / <Link to=\"/reg\">sign up</Link>\r\n          </p>\r\n        )}\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}