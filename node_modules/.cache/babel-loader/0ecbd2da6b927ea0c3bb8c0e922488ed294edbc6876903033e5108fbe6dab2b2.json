{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{BrowserRouter,Routes,Route,Navigate}from\"react-router-dom\";import Main from\"./Main\";import Account from\"./Account\";import Reg from\"./Reg\";import Item from\"./Item\";import Login from\"./Login\";import Favourites from\"./Favourites\";import Chat from\"./Chat\";import Cookies from\"js-cookie\";// Import the cookie library\nimport{validateAccessToken}from\"./app.js\";// Import the validateAccessToken function\nimport{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const AppRouter=()=>{const[isAuthenticated,setIsAuthenticated]=useState(false);useEffect(()=>{async function checkAuthentication(){try{const accessToken=Cookies.get(\"accessToken\");// Check if the user is authenticated based on the presence of the access token\nconst isAuthenticated=accessToken?await validateAccessToken():false;setIsAuthenticated(isAuthenticated);}catch(error){console.error(\"Error checking authentication:\",error);}}checkAuthentication();},[]);return/*#__PURE__*/_jsx(BrowserRouter,{children:/*#__PURE__*/_jsxs(Routes,{children:[isAuthenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Main,{})}),/*#__PURE__*/_jsx(Route,{path:\"/account\",element:/*#__PURE__*/_jsx(Account,{})}),/*#__PURE__*/_jsx(Route,{path:\"/item/:id\",element:/*#__PURE__*/_jsx(Item,{})}),/*#__PURE__*/_jsx(Route,{path:\"/fav\",element:/*#__PURE__*/_jsx(Favourites,{})}),/*#__PURE__*/_jsx(Route,{path:\"/chat/:userID\",element:/*#__PURE__*/_jsx(Chat,{})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Main,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reg\",element:/*#__PURE__*/_jsx(Reg,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/item/:id\",element:/*#__PURE__*/_jsx(Item,{})})]}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})});};export default AppRouter;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Routes","Route","Navigate","Main","Account","Reg","Item","Login","Favourites","Chat","Cookies","validateAccessToken","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","AppRouter","isAuthenticated","setIsAuthenticated","checkAuthentication","accessToken","get","error","console","children","path","element","to"],"sources":["C:/Users/Bodnarchuk Bohdan/Desktop/bazar_remake/frontend/src/AppRouter.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter, Routes, Route, Navigate } from \"react-router-dom\";\r\nimport Main from \"./Main\";\r\nimport Account from \"./Account\";\r\nimport Reg from \"./Reg\";\r\nimport Item from \"./Item\";\r\nimport Login from \"./Login\";\r\nimport Favourites from \"./Favourites\";\r\nimport Chat from \"./Chat\";\r\nimport Cookies from \"js-cookie\"; // Import the cookie library\r\nimport { validateAccessToken } from \"./app.js\"; // Import the validateAccessToken function\r\n\r\nconst AppRouter = () => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  useEffect(() => {\r\n    async function checkAuthentication() {\r\n      try {\r\n        const accessToken = Cookies.get(\"accessToken\");\r\n\r\n        // Check if the user is authenticated based on the presence of the access token\r\n        const isAuthenticated = accessToken\r\n          ? await validateAccessToken()\r\n          : false;\r\n\r\n        setIsAuthenticated(isAuthenticated);\r\n      } catch (error) {\r\n        console.error(\"Error checking authentication:\", error);\r\n      }\r\n    }\r\n\r\n    checkAuthentication();\r\n  }, []);\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Routes>\r\n        {isAuthenticated ? (\r\n          <>\r\n            <Route path=\"/\" element={<Main />} />\r\n            <Route path=\"/account\" element={<Account />} />\r\n            <Route path=\"/item/:id\" element={<Item />} />\r\n            <Route path=\"/fav\" element={<Favourites />} />\r\n            <Route path=\"/chat/:userID\" element={<Chat />} />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Route path=\"/\" element={<Main />} />\r\n            <Route path=\"/reg\" element={<Reg />} />\r\n            <Route path=\"/login\" element={<Login />} />\r\n            <Route path=\"/item/:id\" element={<Item />} />\r\n          </>\r\n        )}\r\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n      </Routes>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}